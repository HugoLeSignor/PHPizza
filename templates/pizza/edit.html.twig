{% extends 'base.html.twig' %}

{% block title %}Modifier une pizza{% endblock %}

{% block body %}
    <main style="max-width: 720px; margin: 2rem auto; padding: 1.5rem; background: #fff; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); font-family: 'Segoe UI', Tahoma, sans-serif;">
        <h1 style="margin-top: 0;">✏️ Modifier une pizza</h1>

        {% for message in app.flashes('error') %}
            <div style="padding: 0.75rem 1rem; background: #ffe3e3; color: #721c24; border-radius: 8px; margin-bottom: 1rem;">
                {{ message }}
            </div>
        {% endfor %}

        <section style="margin-bottom: 2rem;">
            {{ form_start(form, {'attr': {'style': 'display: grid; gap: 0.75rem;'}}) }}
                
                <div style="display: grid; gap: 0.35rem;">
                    {{ form_label(form.name, null, {'label_attr': {'style': 'font-weight: 500;'}}) }}
                    {{ form_widget(form.name, {'attr': {'style': 'padding: 0.6rem 0.75rem; border-radius: 8px; border: 1px solid #d7dce2;'}}) }}
                    {{ form_errors(form.name) }}
                </div>

                <div style="display: grid; gap: 0.35rem;">
                    {{ form_label(form.specialIngredient, null, {'label_attr': {'style': 'font-weight: 500;'}}) }}
                    {{ form_widget(form.specialIngredient, {'attr': {'style': 'padding: 0.6rem 0.75rem; border-radius: 8px; border: 1px solid #d7dce2;'}}) }}
                    {{ form_errors(form.specialIngredient) }}
                </div>

                <div style="display: grid; gap: 0.35rem;">
                    {{ form_label(form.doughType, null, {'label_attr': {'style': 'font-weight: 500;'}}) }}
                    {{ form_widget(form.doughType, {'attr': {'style': 'padding: 0.6rem 0.75rem; border-radius: 8px; border: 1px solid #d7dce2;'}}) }}
                    {{ form_errors(form.doughType) }}
                </div>

                <div style="display: grid; gap: 0.35rem;">
                    {{ form_label(form.ingredients, null, {'label_attr': {'style': 'font-weight: 500;'}}) }}
                    <div style="padding: 0.75rem; border: 1px solid #d7dce2; border-radius: 8px; background: #f9fafb; max-height: 300px; overflow-y: auto;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 0.5rem;">
                            {% for child in form.ingredients %}
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    {{ form_widget(child) }}
                                    {{ form_label(child, null, {'label_attr': {'style': 'margin: 0; cursor: pointer;'}}) }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    {{ form_errors(form.ingredients) }}
                </div>

                <div style="display: flex; gap: 0.75rem;">
                    <button type="submit" style="flex: 1; padding: 0.75rem; background: #ff7a18; color: #fff; border: none; border-radius: 10px; font-weight: 700; cursor: pointer;">
                        Enregistrer
                    </button>
                    <a href="{{ path('app_pizza_index') }}" style="flex: 1; padding: 0.75rem; background: #6c757d; color: #fff; border: none; border-radius: 10px; font-weight: 700; text-align: center; text-decoration: none; display: block;">
                        Annuler
                    </a>
                </div>
                
            {{ form_end(form) }}
        </section>
    </main>
{% endblock %}
